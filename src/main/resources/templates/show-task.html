<!DOCTYPE HTML>

<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title th:text = "${task.getName()}" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <style>
            .bi-calendar-check {
                fill: green;
                fill-rule: evenodd;
                transform:scale(2);
            }
            .bi-calendar-x {
                fill: red;
                fill-rule: evenodd;
                transform:scale(2);
            }
            .bi-calendar {
                fill: black;
                fill-rule: evenodd;
                transform:scale(2);
            }
            a {
                font-size: 20px;
            }
            b {
                font-size: 20px;
            }
        </style>
    </head>
    <body>
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a href="/home" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
                <svg class="bi me-2" width="40" height="32"><use xlink:href="#"></use></svg>
                <span class="fs-4">TaskManager</span>
            </a>
            <ul class="nav nav-pills">
                <li class="nav-item"><a href="/home" class="nav-link active" aria-current="page">Home</a></li>
                <li class="nav-item"><a href="/add" class="nav-link">Add task</a></li>
            </ul>
        </header>
    `   <div class="container mt-5 mb-5">
            <div>
                <h1 th:text="${task.getName()}" style="display: inline-block;" ></h1>
                <svg th:if="${task.isDone}" xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="green" class="bi bi-calendar-check" viewBox="-10 0 25 25">
                    <path d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                </svg>
                <svg th:if="${task.isFailed}" xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="red" class="bi bi-calendar-x" viewBox="-10 0 25 25">
                    <path d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"/>
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                </svg>
                <svg th:unless="${task.isDone || task.isFailed}" xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="black" class="bi bi-calendar" viewBox="-10 0 25 25">
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                </svg>
            </div>
            <div>
                <form th:unless="${task.isDone()}" action="/edit-status" method="post" style="display: inline-block">
                    <input type="hidden" name="id" th:value="${task.getID()}">
                    <input type="hidden" name="type" th:value="1">
                    <button type="submit" class="btn btn-success">Mark as Done</button>
                </form>
                <form th:unless="${task.isFailed()}" action="/edit-status" method="post" style="display: inline-block">
                    <input type="hidden" name="id" th:value="${task.getID()}">
                    <input type="hidden" name="type" th:value="0">
                    <button type="submit" class="btn btn-danger">Mark as Failed</button>
                </form>
            </div> <br>
            <form action="/edit" method="post">
                <input type="hidden" name="id" th:value="${task.getID()}">
                <div class="input-group">
                    <span class="input-group-text">Date</span>
                    <input type="date" name="date" th:value="${#dates.format(task.getTime(), 'yyyy-MM-dd')}" class="form-control">
                </div> <br>
                <div class="input-group">
                    <span class="input-group-text">Time</span>
                    <input type="time" name="time" th:value="${#dates.format(task.getTime(), 'HH:mm')}" class="form-control">
                </div> <br>
                <div class="input-group">
                    <span class="input-group-text">Name</span>
                    <input type="text" name="name" th:value="${task.getName()}" class="form-control">
                </div> <br>
                <div class="input-group">
                    <span class="input-group-text">Description</span>
                    <textarea rows="3" type="text" name="description" th:text="${task.getDescription()}" class="form-control"></textarea>
                </div> <br>
                <button type="submit" class="btn btn-success">Save</button>
            </form>
            <form action="/delete" method="post" style="display: inline-block">
                <input type="hidden" name="id" th:value="${task.getID()}">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure?')">Delete task</button>
            </form>
        </div>
    </body>
</html>