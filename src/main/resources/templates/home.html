<!DOCTYPE HTML>

<html xmlns:th="http://www.thymeleaf.org">
  <head>
      <title th:text = "'Tasks'" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
      <style>
          .themed-grid-col {
              padding-top: .75rem;
              padding-bottom: .75rem;
              /*background-color: rgba(86, 61, 124, .15);*/
              background-color: whitesmoke;
              border: 1px solid rgba(86, 61, 124, .2);
          }
          .bi-calendar-check {
              fill: green;
              fill-rule: evenodd;
              transform:scale(2);
          }
          .bi-calendar-x {
               fill: red;
               fill-rule: evenodd;
               transform:scale(2);
           }
          .bi-calendar {
                fill: black;
                fill-rule: evenodd;
                transform:scale(2);
          }

          a {
              font-size: 20px;
          }
          b {
               font-size: 20px;
           }
      </style>

      <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
  </head>

  <body>
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
      <a href="/home" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
          <svg class="bi me-2" width="40" height="32"><use xlink:href="#"></use></svg>
          <span class="fs-4">TaskManager</span>
      </a>
      <ul class="nav nav-pills">
          <li class="nav-item"><a href="/home" class="nav-link active" aria-current="page">Home</a></li>
          <li class="nav-item"><a href="/add" class="nav-link">Add task</a></li>
      </ul>
    </header>

    <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
        <h1 class="display-4 fw-normal">Tasks</h1>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-2 themed-grid-col text-center"><b th:text="Date"/></div>
            <div class="col-1 themed-grid-col text-center"><b th:text="Time"/></div>
            <div class="col-8 themed-grid-col text-center"><b th:text="Name"/></div>
            <div class="col-1 themed-grid-col text-center"><b th:text="Status"/>
        </div>
        <div th:each="el : ${page.content} ">
            <div class="row">
                <div class="col-2 themed-grid-col text-center"><a th:text="${#dates.format(el.time, 'dd.MM.yyyy')}"/></div>
                <div class="col-1 themed-grid-col text-center"><a th:text="${#dates.format(el.time, 'HH:mm')}"/></div>
                <div class="col-8 themed-grid-col text-center"><a th:href="@{'/show/' + ${el.ID}}" th:text="${el.name}"/></div>
                <div class="col-1 themed-grid-col text-center">
                    <svg th:if="${el.isDone}" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="green" class="bi bi-calendar-check" viewBox="0 0 20 20">
                        <path d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                    <svg th:if="${el.isFailed}" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="red" class="bi bi-calendar-x" viewBox="0 0 20 20">
                        <path d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                    <svg th:unless="${el.isDone || el.isFailed}" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="black" class="bi bi-calendar" viewBox="0 0 20 20">
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

  <div class="container mt-5 mb-3">
      <ul class="pagination justify-content-center">
          <li class="page-item disabled" th:if="${not page.hasPrevious()}">
<!--              индексация с 1, но getNumber возвращает n-1-->
            <a class="page-link" th:href="${url}+'?page='+${page.getNumber()}+'&size='+${page.getSize()}">Previous</a>
          </li>
          <li class="page-item" th:if="${page.hasPrevious()}">
              <a class="page-link" th:href="${url}+'?page='+${page.getNumber()}+'&size='+${page.getSize()}">Previous</a>
          </li>
          <div th:each="i: ${#numbers.sequence(1, page.getTotalPages())}">
            <li class="page-item" th:if="not ${i == page.getNumber()+1}">
                <a class="page-link" th:href="${url}+'?page='+${i}+'&size='+${page.getSize()}" th:text="${i}"/>
            </li>
            <li class="page-item active" th:if="${i == page.getNumber()+1}">
                <a class="page-link" th:href="${url}+'?page='+${i}+'&size='+${page.getSize()}" th:text="${i}"/>
            </li>
          </div>
          <li class="page-item disabled" th:if="${not page.hasNext()}">
              <a class="page-link" th:href="${url}+'?page='+${page.getNumber()+2}+'&size='+${page.getSize()}" tabindex="-1">Next</a>
          </li>
          <li class="page-item" th:if="${page.hasNext()}">
              <a class="page-link" th:href="${url}+'?page='+${page.getNumber()+2}+'&size='+${page.getSize()}" tabindex="-1">Next</a>
          </li>
      </ul>
  </div>
  </body>
</html>